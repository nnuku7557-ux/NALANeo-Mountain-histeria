-- ============================================
-- NalaNeo OFFICIAL - ULTIMATE STEALTH v7.0
-- ‚úÖ REAL NAMETAG HIDER + FULL STEALTH
-- ============================================

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "ZNAL Ultimate Stealth",
   LoadingTitle = "Loading Ultimate Stealth...",
   LoadingSubtitle = "Nametag Remover System",
   Theme = "Dark",
   ToggleUIKeybind = "K"
})

local MainTab = Window:CreateTab("üöÄ Ultimate Stealth", nil)

-- CHECKPOINTS DATA
local CheckPoints = {
    ["üèïÔ∏è Base Camp"] = Vector3.new(-627.43, 325.60, 700.06),
    ["üìç CP 1"] = Vector3.new(-505.41, 357.60, 217.11),
    ["üìç CP 2"] = Vector3.new(-383.16, 401.60, -163.74),
    ["üìç CP 3"] = Vector3.new(-349.74, 481.60, -518.93),
    ["üìç CP 4"] = Vector3.new(200.85, 489.60, -564.22),
    ["üìç CP 5"] = Vector3.new(571.43, 605.60, -559.61),
    ["üìç CP 6"] = Vector3.new(1120.72, 693.60, -521.52),
    ["üìç CP 7"] = Vector3.new(1471.75, 785.60, -474.48),
    ["üìç CP 8"] = Vector3.new(2350.22, 897.60, -506.70),
    ["üìç CP 9"] = Vector3.new(2817.32, 1041.60, -519.59),
    ["üìç CP 10"] = Vector3.new(3254.07, 1177.60, -493.48),
    ["üìç CP 11"] = Vector3.new(3750.12, 1325.60, -504.94),
    ["üìç CP 12"] = Vector3.new(4166.46, 1506.60, -454.86),
    ["üìç CP 13"] = Vector3.new(4575.90, 1582.60, -515.54),
    ["üìç CP 14"] = Vector3.new(4587.40, 1781.60, -1039.44),
    ["üéØ CP 15 (Finish)"] = Vector3.new(4615.27, 2177.60, -1411.48)
}

-- VARIABLES
local AutoWalk = false
local CurrentCP = 1  -- Mulai dari Base Camp
local TotalCPs = 16  -- Base Camp + 15 CP
local TeleDelay = 3
local UltimateStealth = false

-- ‚úÖ ULTIMATE NAMETAG HIDER (WORK 100%)
local OriginalNametagData = {}

local function RemoveNametagCompletely()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    -- BACKUP DATA PERTAMA KALI
    if not OriginalNametagData.BackupDone then
        OriginalNametagData = {
            BackupDone = true,
            HumanoidData = {},
            BillboardGuis = {}
        }
        
        -- Backup Humanoid settings
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            OriginalNametagData.HumanoidData = {
                DisplayDistanceType = humanoid.DisplayDistanceType,
                NameDisplayDistance = humanoid.NameDisplayDistance,
                HealthDisplayDistance = humanoid.HealthDisplayDistance
            }
        end
    end
    
    -- METHOD 1: DISABLE HUMANOID NAMETAG (Cara standar)
    local humanoid = character:FindFirstChild("Humanoid")
    if humanoid then
        humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None
        humanoid.NameDisplayDistance = 0
        humanoid.HealthDisplayDistance = 0
        
        -- Extra: Set attribute untuk disable
        humanoid:SetAttribute("ShowDisplayName", false)
    end
    
    -- METHOD 2: REMOVE BILLBOARD GUI (Cara manual)
    for _, child in pairs(character:GetDescendants()) do
        if child:IsA("BillboardGui") then
            child.Enabled = false
            child.Adornee = nil
            child.Parent = nil  -- Completely remove
        end
    end
    
    -- METHOD 3: HIDE PLAYER IN PLAYER LIST (Advanced)
    pcall(function()
        player:SetAttribute("DisplayName", " ")
        player:SetAttribute("hide", true)
    end)
    
    -- METHOD 4: MODIFY PLAYER'S HEAD (Untuk hilangkan name di atas kepala)
    local head = character:FindFirstChild("Head")
    if head then
        -- Remove semua SurfaceGui dari Head
        for _, gui in pairs(head:GetChildren()) do
            if gui:IsA("SurfaceGui") or gui:IsA("BillboardGui") then
                gui:Destroy()
            end
        end
        
        -- Add transparent decal biar clean
        local decal = Instance.new("Decal")
        decal.Texture = ""
        decal.Transparency = 1
        decal.Parent = head
    end
    
    print("[ULTIMATE STEALTH] Nametag completely removed")
end

local function RestoreNametag()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character or not OriginalNametagData.BackupDone then return end
    
    -- Restore Humanoid settings
    local humanoid = character:FindFirstChild("Humanoid")
    if humanoid and OriginalNametagData.HumanoidData then
        humanoid.DisplayDistanceType = OriginalNametagData.HumanoidData.DisplayDistanceType or Enum.HumanoidDisplayDistanceType.Viewer
        humanoid.NameDisplayDistance = OriginalNametagData.HumanoidData.NameDisplayDistance or 100
        humanoid.HealthDisplayDistance = OriginalNametagData.HumanoidData.HealthDisplayDistance or 100
        humanoid:SetAttribute("ShowDisplayName", true)
    end
    
    -- Restore player attributes
    pcall(function()
        player:SetAttribute("DisplayName", nil)
        player:SetAttribute("hide", false)
    end)
    
    -- Remove transparent decal from head
    local head = character:FindFirstChild("Head")
    if head then
        for _, decal in pairs(head:GetChildren()) do
            if decal:IsA("Decal") and decal.Texture == "" then
                decal:Destroy()
            end
        end
    end
    
    OriginalNametagData = {}
    print("[ULTIMATE STEALTH] Nametag restored")
end

-- ‚úÖ FULL CHARACTER STEALTH
local OriginalCharacterData = {}

local function EnableFullStealth()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    -- Backup data
    if not OriginalCharacterData.BackupDone then
        OriginalCharacterData = {
            BackupDone = true,
            Parts = {},
            Tools = {}
        }
        
        -- Backup semua parts
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                OriginalCharacterData.Parts[part] = {
                    Transparency = part.Transparency,
                    CanCollide = part.CanCollide,
                    Color = part.Color,
                    Material = part.Material
                }
            end
        end
    end
    
    -- 1. HIDE NAMETAG (PENTING!)
    RemoveNametagCompletely()
    
    -- 2. MAKE CHARACTER INVISIBLE
    for part, data in pairs(OriginalCharacterData.Parts) do
        if part and part.Parent then
            part.Transparency = 1
            part.CanCollide = false
            
            -- Extra: Make parts completely undetectable
            part.LocalTransparencyModifier = 1
            part.CastShadow = false
        end
    end
    
    -- 3. HIDE TOOLS
    for _, tool in pairs(character:GetChildren()) do
        if tool:IsA("Tool") then
            OriginalCharacterData.Tools[tool] = tool:Clone()
            for _, part in pairs(tool:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Transparency = 1
                end
            end
        end
    end
    
    -- 4. REMOVE ALL EFFECTS
    for _, effect in pairs(character:GetDescendants()) do
        if effect:IsA("ParticleEmitter") or effect:IsA("Trail") or effect:IsA("Beam") then
            effect.Enabled = false
            effect.Parent = nil
        end
    end
    
    Rayfield:Notify({
        Title = "ULTIMATE STEALTH ON",
        Content = "Nametag & Character hidden",
        Duration = 2,
        Image = 4483362458
    })
end

local function DisableStealth()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character or not OriginalCharacterData.BackupDone then return end
    
    -- Restore nametag
    RestoreNametag()
    
    -- Restore character visibility
    for part, data in pairs(OriginalCharacterData.Parts) do
        if part and part.Parent then
            pcall(function()
                part.Transparency = data.Transparency
                part.CanCollide = data.CanCollide
                part.Color = data.Color
                part.Material = data.Material
                part.LocalTransparencyModifier = 0
                part.CastShadow = true
            end)
        end
    end
    
    -- Restore tools
    for tool, original in pairs(OriginalCharacterData.Tools) do
        if tool and tool.Parent then
            for _, part in pairs(tool:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Transparency = 0
                end
            end
        end
    end
    
    OriginalCharacterData = {}
    
    Rayfield:Notify({
        Title = "STEALTH DISABLED",
        Content = "Visibility restored",
        Duration = 2,
        Image = 4483362458
    })
end

-- ‚úÖ AUTO WALK SYSTEM
local function StartAutoWalk()
    if not AutoWalk then return end
    
    while AutoWalk do
        local cpNames = {
            "üèïÔ∏è Base Camp", "üìç CP 1", "üìç CP 2", "üìç CP 3", "üìç CP 4",
            "üìç CP 5", "üìç CP 6", "üìç CP 7", "üìç CP 8", "üìç CP 9",
            "üìç CP 10", "üìç CP 11", "üìç CP 12", "üìç CP 13", "üìç CP 14",
            "üéØ CP 15 (Finish)"
        }
        
        local cpName = cpNames[CurrentCP]
        local position = CheckPoints[cpName]
        
        if position then
            local char = game.Players.LocalPlayer.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                -- Enable stealth sebelum teleport
                if UltimateStealth then
                    EnableFullStealth()
                end
                
                -- Silent teleport
                char.HumanoidRootPart.CFrame = CFrame.new(position)
                
                -- Update status
                print("[AUTO WALK] Teleport to " .. cpName)
            end
        end
        
        -- Next checkpoint
        CurrentCP = CurrentCP + 1
        if CurrentCP > TotalCPs then
            CurrentCP = 1  -- Kembali ke Base Camp
            Rayfield:Notify({
                Title = "LOOP COMPLETED",
                Content = "Starting new cycle...",
                Duration = 3,
                Image = 4483362458
            })
        end
        
        wait(TeleDelay)
    end
end

-- ‚úÖ UI ELEMENTS
MainTab:CreateSection("üéØ Ultimate Stealth Control")

local StealthToggle = MainTab:CreateToggle({
   Name = "üëª Ultimate Stealth Mode",
   CurrentValue = false,
   Callback = function(state)
        UltimateStealth = state
        if state then
            EnableFullStealth()
        else
            DisableStealth()
        end
   end
})

local WalkToggle = MainTab:CreateToggle({
   Name = "‚ñ∂Ô∏è Start Auto Walk",
   CurrentValue = false,
   Callback = function(state)
        AutoWalk = state
        if state then
            -- Auto enable stealth
            if not UltimateStealth then
                UltimateStealth = true
                StealthToggle:Set(true)
                EnableFullStealth()
            end
            
            spawn(StartAutoWalk)
            Rayfield:Notify({
                Title = "AUTO WALK STARTED",
                Content = "Stealth: ACTIVE | Delay: " .. TeleDelay .. "s",
                Duration = 3,
                Image = 4483362458
            })
        else
            Rayfield:Notify({
                Title = "AUTO WALK STOPPED",
                Content = "Teleportation paused",
                Duration = 2,
                Image = 4483362458
            })
        end
   end
})

-- Manual Teleport Buttons
MainTab:CreateSection("üìç Quick Teleport")

local buttonGroups = {
    {"üèïÔ∏è Base Camp", "üìç CP 1", "üìç CP 2", "üìç CP 3"},
    {"üìç CP 4", "üìç CP 5", "üìç CP 6", "üìç CP 7"},
    {"üìç CP 8", "üìç CP 9", "üìç CP 10", "üìç CP 11"},
    {"üìç CP 12", "üìç CP 13", "üìç CP 14", "üéØ CP 15 (Finish)"}
}

for _, group in pairs(buttonGroups) do
    MainTab:CreateSection("Group " .. group[1])
    for _, cpName in pairs(group) do
        MainTab:CreateButton({
            Name = cpName,
            Callback = function()
                local position = CheckPoints[cpName]
                if position then
                    local char = game.Players.LocalPlayer.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        -- Enable stealth
                        if UltimateStealth then
                            EnableFullStealth()
                        end
                        
                        char.HumanoidRootPart.CFrame = CFrame.new(position)
                        
                        Rayfield:Notify({
                            Title = "TELEPORTED",
                            Content = "To " .. cpName,
                            Duration = 2,
                            Image = 4483362458
                        })
                    end
                end
            end
        })
    end
end

-- Settings Tab
local SettingsTab = Window:CreateTab("‚öôÔ∏è Settings", nil)

SettingsTab:CreateSection("Performance")

SettingsTab:CreateSlider({
   Name = "Teleport Delay",
   Range = {1, 10},
   Increment = 0.5,
   Suffix = "seconds",
   CurrentValue = TeleDelay,
   Callback = function(value)
        TeleDelay = value
   end
})

SettingsTab:CreateSection("Stealth Methods")

SettingsTab:CreateToggle({
   Name = "Method 1: Disable Humanoid Nametag",
   CurrentValue = true,
   Callback = function(state)
        -- Always enabled for best results
   end
})

SettingsTab:CreateToggle({
   Name = "Method 2: Remove BillboardGui",
   CurrentValue = true,
   Callback = function(state)
        -- Always enabled
   end
})

SettingsTab:CreateToggle({
   Name = "Method 3: Hide in Player List",
   CurrentValue = true,
   Callback = function(state)
        -- Always enabled
   end
})

-- Status Display
SettingsTab:CreateSection("Current Status")

local StatusLabel = SettingsTab:CreateLabel("Status: Ready")
local StealthLabel = SettingsTab:CreateLabel("Stealth: INACTIVE")
local CPLabel = SettingsTab:CreateLabel("Current: Base Camp")

spawn(function()
    while true do
        wait(0.5)
        
        if AutoWalk then
            StatusLabel:Set("Status: AUTO WALK ACTIVE")
            local cpNames = {"Base Camp", "CP 1", "CP 2", "CP 3", "CP 4", "CP 5", "CP 6", "CP 7", "CP 8", "CP 9", "CP 10", "CP 11", "CP 12", "CP 13", "CP 14", "CP 15"}
            CPLabel:Set("Current: " .. cpNames[CurrentCP] or "Base Camp")
        else
            StatusLabel:Set("Status: IDLE")
        end
        
        if UltimateStealth then
            StealthLabel:Set("Stealth: ACTIVE (Nametag Hidden)")
        else
            StealthLabel:Set("Stealth: INACTIVE")
        end
    end
end)

-- Final Instructions
SettingsTab:CreateSection("Instructions")
SettingsTab:CreateLabel("1. Enable Ultimate Stealth first")
SettingsTab:CreateLabel("2. Click Start Auto Walk")
SettingsTab:CreateLabel("3. Your nametag WILL be hidden")
SettingsTab:CreateLabel("4. Character becomes invisible")

-- Initial notification
Rayfield:Notify({
    Title = "ULTIMATE STEALTH LOADED",
    Content = "Nametag remover system: ACTIVE\nUsing 3 methods for guaranteed results",
    Duration = 5,
    Image = 4483362458
})

print("========================================")
print("ZNAL ULTIMATE STEALTH v7.0 LOADED")
print("Nametag Removal: 3 METHODS ACTIVE")
print("1. Disable Humanoid Display")
print("2. Remove BillboardGui")
print("3. Hide in Player List")
print("========================================")
